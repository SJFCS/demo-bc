## 货币

多币种记账有两种语法，单价和总价：

```
2023-10-10 * "购汇"
  Assets:钱包:美元      100 USD @ 7 CNY
  Expense:手续费        70 CNY
  Assets:钱包:人民币    -7070 CNY

2023-10-10 * "结汇"
  Assets:钱包:人民币    7000 CNY @@ 100 USD
  Expenses:手续费       1 USD
  Assets:钱包:美元      -101 USD


```

第一种语法中，表示 1 USD = 7 CNY，Beancount 会按照这个价格，把 USD 转换成 CNY，然后校验这笔交易是否平衡。其实 Beancount 在实现上和之前多币种记账介绍的差不多，只不过不用你手动去写那么多账户了，Beancount 自动的创建了 Equity:Conversions:Current 账户，充当了之前提到的“银行”的账户。

第二种语法与第一种语法的区别，就是直接告诉 Beancount 7000 CNY 一共等于 100 USD 了。

货币不用提前声明，可以直接使用。货币命名只允许包含字母、下划线、中划线、点和单引号，只能以大写字母开头。

## 成本

Beancount 不会保留货币转换的价格信息，但投资一般需要记录每次交易的成本信息，以便日后卖出时知道盈亏。对此，Beancount 有专门的语法：

```
2023-10-10 * "买股票"
  Assets:某股票     100 SOME.STOCK { 1 CNY }
  Assets:现金       -100 CNY

2023-10-11 * "买股票"
  Assets:某股票     100 SOME.STOCK { 2 CNY }
  Assets:现金       -200 CNY

2023-10-12 * "卖股票"
  Assets:某股票     -100 SOME.STOCK { 1 CNY }
  Assets:现金       300 CNY
  Income:投资盈亏

```

与价格不同，Beancount 会记录这个成本信息。例如这个例子中，Beancount 记录的不只是你有 200 股股票，实际记录的是你有 100 股一块钱买来的股票和 100 股两块钱买来的股票。所以卖出时，就需要指定你要卖的是哪个成本的股票。也可以不指定，Beancount 会按照先入先出的规则计算：

```
2023-10-12 * "卖股票"
  Assets:某股票     -100 SOME.STOCK {}
  Assets:现金       300 CNY
  Income:投资盈亏
```

最终 Beancount 会计算出来这笔交易中的投资盈亏是 -200 CNY。

## 价格

货币的汇率和股票的价格，都是有可能变动的。可以使用价格语法记录：

```
2023-01-01 price USD            6.91 CNY
2023-10-12 price SOME.STOCK     3 CNY

```

按成本：按照成本展示，例如刚才那个股票就会展示成 300 CNY；
按市价：按照价格展示，例如刚才那个股票就会展示成 600 CNY；
按单位数量：就是保持记账时原始的币种，不做任何转换，例如刚才那个股票就会展示成 200 SOME.STOCK；
转换成 USD：就是把所有货币全部转换成这种货币，参考多币种记账的例子。
